(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3761:(t,e,n)=>{Promise.resolve().then(n.bind(n,7761))},4599:()=>{},5340:()=>{},7761:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var o=n(5155),i=n(9391),s=n.n(i);class c{connect(){this.client=s().connect("wss://broker.emqx.io:8084/mqtt",{clean:!0,connectTimeout:4e3,clientId:"emqx_test",username:"emqx_test",password:"emqx_test"}),this.client.on("connect",()=>{var t,e;console.log("MQTT connected"),null==(t=this.client)||t.subscribe(this.topic),null==(e=this.client)||e.subscribe("".concat(this.baseTopicString,"/destination")),this.startLocationTracking()}),this.client.on("message",(t,e)=>{console.log("MQTT Message [".concat(t,"]:"),e.toString())}),this.client.on("error",t=>{console.error("MQTT Error:",t)})}startLocationTracking(){navigator.geolocation&&navigator.geolocation.watchPosition(t=>{var e;this.currentLocation={lat:t.coords.latitude,lng:t.coords.longitude},null==(e=this.client)||e.publish(this.topic,JSON.stringify(this.currentLocation))},t=>{console.error("Geolocation error:",t.message)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})}publish(t,e){var n;null==(n=this.client)||n.publish("".concat(this.baseTopicString,"/").concat(t),e)}disconnect(){var t;null==(t=this.client)||t.end()}constructor(){this.client=null,this.baseTopicString="ame504/hoverboard",this.topic="".concat(this.baseTopicString,"/location"),this.currentLocation=null}}let a=new c;var r=n(2115),l=n(2200);let h={width:"50vw",height:"70vh"},g=t=>{let{zoom:e}=t,[n,i]=(0,r.useState)({lat:37.437041393899676,lng:-4.191635586788259});return(0,r.useEffect)(()=>{let t;return navigator.geolocation?t=navigator.geolocation.watchPosition(t=>{i({lat:t.coords.latitude,lng:t.coords.longitude})},t=>{console.warn("Geolocation error:",t.message)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3}):console.warn("Geolocation is not supported by this browser."),()=>{void 0!==t&&navigator.geolocation.clearWatch(t)}},[]),(0,o.jsx)(l.aJ,{googleMapsApiKey:"AIzaSyBDBiCoJWdTr1c9EKNlYoQ995ktr5UMQlU",children:(0,o.jsx)(l.u6,{mapContainerStyle:h,center:n,zoom:e,children:(0,o.jsx)(l.pH,{position:n,label:"You"})})})};class u{constructor(t,e,n){this.name=t,this.lat=e,this.lng=n}}let m=[new u("Location1",37.437041393899676,-4.191635586788259),new u("Location2",37.437041393899676,-4.191635586788259),new u("Location3",37.437041393899676,-4.191635586788259),new u("Location4",37.437041393899676,-4.191635586788259),new u("Location5",37.437041393899676,-4.191635586788259)];function d(){let[t,e]=(0,r.useState)(null);return(0,o.jsxs)("div",{className:"w-64 bg-gray-100 p-4 border-r",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Locations"}),(0,o.jsx)("div",{className:"flex flex-col space-y-2",children:m.map(n=>(0,o.jsx)("button",{onClick:()=>{e(n.name),a.publish("destination",JSON.stringify({lat:n.lat,lng:n.lng}))},className:"px-4 py-2 text-left rounded-lg transition-colors ".concat(t===n.name?"bg-blue-500 text-white":"bg-white hover:bg-gray-200"),children:n.name},n.name))})]})}function p(){return(0,r.useEffect)(()=>(a.connect(),()=>{a.disconnect()}),[]),(0,o.jsx)("div",{className:"grid grid-rows-[1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:(0,o.jsxs)("main",{className:"row-start-1 flex gap-[24px] flex-wrap items-center sm:items-start",children:[(0,o.jsx)("div",{children:(0,o.jsx)(d,{})}),(0,o.jsx)("div",{children:(0,o.jsx)(g,{zoom:17})})]})})}},9413:()=>{},9838:()=>{}},t=>{var e=e=>t(t.s=e);t.O(0,[84,391,441,684,358],()=>e(3761)),_N_E=t.O()}]);